<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>


</head>

<body>

<h1 id="data-management-2-variable-types-and-factors">Data management 2:
variable types, and factors</h1>
<p>Mauricio Garnier-Villarreal, Joris M. Schröder &amp; Joseph Charles
Van Matre 01 September, 2022</p>
<ul>
<li><a href="#setup-the-r-session" id="toc-setup-the-r-session">Setup
the R session</a></li>
<li><a href="#import-the-data-set" id="toc-import-the-data-set">Import
the data set</a>
<ul>
<li><a href="#select-variables-of-interest" id="toc-select-variables-of-interest">Select variables of
interest</a></li>
</ul></li>
<li><a href="#variable-types" id="toc-variable-types">Variable
types</a></li>
<li><a href="#factor" id="toc-factor"><code>factor</code></a></li>
</ul>
<h1 id="setup-the-r-session">Setup the R session</h1>
<p>When we start up we always need to setup our session. For this wee
need to set our working directory, in this case I am doing that for the
folder that holds the downloaded <a href="https://www.worldvaluessurvey.org/">World Values Survey (WVS)</a>
<code>SPSS</code> data set</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;~path_to_your_file&quot;</span>)</span></code></pre></div>
<p>The next step for our session will be to load the packages that we
will be using</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span></code></pre></div>
<h1 id="import-the-data-set">Import the data set</h1>
<p>Here we will be importing the <code>.sav</code> WVS data set</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;WVS_Cross-National_Wave_7_sav_v2_0.sav&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dat)</span></code></pre></div>
<pre><code>## [1] 76897   548</code></pre>
<p>Here we are calling our data set <strong>dat</strong> and asking to
see the dimension of it. We see that the data set has 76897 subjects,
and 548 columns.</p>
<h2 id="select-variables-of-interest">Select variables of interest</h2>
<p>In cases with large data sets like this we might want to select a
subset of variables that we want to work with. Since it is not easy to
see 548 variables.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Q275&quot;</span>, <span class="st">&quot;Q260&quot;</span>, <span class="st">&quot;Q262&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> dat[,vars]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dat2)</span></code></pre></div>
<pre><code>## [1] 76897     3</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat2)</span></code></pre></div>
<pre><code>##   Q275 Q260 Q262
## 1    3    2   60
## 2    7    1   47
## 3    7    1   48
## 4    2    2   62
## 5    2    1   49
## 6    1    2   51</code></pre>
<p>Here we are first creating a vector with the variable names for the
ones I want to keep. You can see all variable names for the full data
set as well</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat)</span></code></pre></div>
<p>After writing which variables we want to work with, we create a new
data set <strong>dat2</strong> with only these 7 variables, and make
sure we did it correctly by looking at the the dimension of the data
<strong>dim(dat2)</strong> and looking at the first 6 rows of it
<strong>head(dat2)</strong>. These are quick checks that we have done
this correctly.</p>
<h1 id="variable-types">Variable types</h1>
<p>When working with data, need to be clear on what type of data is
provided by each variable. From these selected items, we will look at 3
types, binary (Sex, Q260), ordered categorical (Highest education level
Q275), and continuous (Age Q262).</p>
<p>For all of these variables, the data is imported as numerical because
even for the categorical variables we have stated that some numbers mean
something other than the number. For this reason, we could ask something
that makes no sense, like the mean of the education level</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(dat2<span class="sc">$</span>Q275, <span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>## [1] 3.50413</code></pre>
<p>And R will give us a value, but this is meaningless because we have
categorical levels of education, so this 3.5 cannot be interpreted.</p>
<p>We can see the attributes and basix frequency table of a variable
like this</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dat2<span class="sc">$</span>Q275)</span></code></pre></div>
<pre><code>## $label
## [1] &quot;Highest educational level: Respondent [ISCED 2011]&quot;
## 
## $format.spss
## [1] &quot;F3.0&quot;
## 
## $labels
##         Other missing; Multiple answers Mail (EVS) 
##                                                 -5 
##                                          Not asked 
##                                                 -4 
##                                          No answer 
##                                                 -2 
##                                         Don´t know 
##                                                 -1 
## Early childhood education (ISCED 0) / no education 
##                                                  0 
##                        Primary education (ISCED 1) 
##                                                  1 
##                Lower secondary education (ISCED 2) 
##                                                  2 
##                Upper secondary education (ISCED 3) 
##                                                  3 
##    Post-secondary non-tertiary education (ISCED 4) 
##                                                  4 
##           Short-cycle tertiary education (ISCED 5) 
##                                                  5 
##                   Bachelor or equivalent (ISCED 6) 
##                                                  6 
##                     Master or equivalent (ISCED 7) 
##                                                  7 
##                   Doctoral or equivalent (ISCED 8) 
##                                                  8 
##                                              Other 
##                                                  9</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat2<span class="sc">$</span>Q275, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
<pre><code>## 
##     0     1     2     3     4     5     6     7     8  &lt;NA&gt; 
##  4126  9932 10623 19843  7090  6151 13045  4548   920   619</code></pre>
<p>In this case we can see the possible answer labels, and that the
actual answers are between 0 (<em>Early childhood education</em>) and 8
(<em>Doctoral or equivalent</em>).</p>
<p>The same applies for the Sex variable, we can see that we have some
missing value attributes, and possible valid answers of Male (1) and
Female (2), and looking at the frequency table we see that there are
more women than men in the sample.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dat2<span class="sc">$</span>Q260)</span></code></pre></div>
<pre><code>## $label
## [1] &quot;Sex&quot;
## 
## $format.spss
## [1] &quot;F3.0&quot;
## 
## $labels
## Other missing; Multiple answers Mail (EVS) 
##                                         -5 
##                                  Not asked 
##                                         -4 
##                                  No answer 
##                                         -2 
##                                       Male 
##                                          1 
##                                     Female 
##                                          2</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat2<span class="sc">$</span>Q260, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span></code></pre></div>
<pre><code>## 
##     1     2  &lt;NA&gt; 
## 36556 40290    51</code></pre>
<p>It is worth noting that research in general has failed the area of
diversity, as very few data sets include variables accounting for gender
diversity, and we still see only variables with options of Male and
Female. We expect for this dversity to be accounted in future data
sets.</p>
<p>On the other side, we can also have real continuous variables like
Age. For which the mean is a meaningful metric</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dat2<span class="sc">$</span>Q262)</span></code></pre></div>
<pre><code>## $label
## [1] &quot;Age&quot;
## 
## $format.spss
## [1] &quot;F3.0&quot;
## 
## $labels
## Other missing; Multiple answers Mail (EVS) 
##                                         -5 
##                                  Not asked 
##                                         -4 
##                                  No answer 
##                                         -2 
##                                 Don&#39;t know 
##                                         -1</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(dat2<span class="sc">$</span>Q262, <span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>## [1] 43.01547</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(dat2<span class="sc">$</span>Q262, <span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>## [1] 41</code></pre>
<p>Here we can see that the average age of the sample is 43.02 years
old, and the median age is 41.</p>
<p>Clearly, depending of the type of variable is the type of information
that we should ask R to give us. R doesn’t know what the numbers mean
for us.</p>
<h1 id="factor"><code>factor</code></h1>
<p>As we said, R doesn’t know what the numbers in the data are. But you
can tell it, for example you can tell it that a variable is categorical
by specifying as a <code>factor()</code>. With this function we can
specify to treat a variable as categorical.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>dat2<span class="sc">$</span>sex_fac <span class="ot">&lt;-</span> <span class="fu">factor</span>(dat2<span class="sc">$</span>Q260)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dat2<span class="sc">$</span>sex_fac)</span></code></pre></div>
<pre><code>## $levels
## [1] &quot;1&quot; &quot;2&quot;
## 
## $class
## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(dat2<span class="sc">$</span>sex_fac, <span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>## Warning in mean.default(dat2$sex_fac, na.rm = T): argument is not numeric or
## logical: returning NA

## [1] NA</code></pre>
<p>When we use the <code>factor()</code> function, we can create a new
factor variable for the sex variable. When we do this we see in
attributes that the <code>class</code> specifies that it is a factor,
and we have a <code>levels</code> attribute that tell us the possible
answers. And when we try to estimate mean, now we get an <code>NA</code>
for it, as R cannot estimate a mean for a categorical variable.</p>
<p>We can also extend the use of the factor function. Since it is
already categorical, why keep using numbers, lets change those numerical
codes for text that specifies what they mean.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>dat2<span class="sc">$</span>sex_fac <span class="ot">&lt;-</span> <span class="fu">factor</span>(dat2<span class="sc">$</span>Q260, </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Feamale&quot;</span>))</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dat2<span class="sc">$</span>sex_fac)</span></code></pre></div>
<pre><code>## $levels
## [1] &quot;Male&quot;    &quot;Feamale&quot;
## 
## $class
## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat2<span class="sc">$</span>Q260, dat2<span class="sc">$</span>sex_fac)</span></code></pre></div>
<pre><code>##    
##      Male Feamale
##   1 36556       0
##   2     0   40290</code></pre>
<p>Here we use 2 new arguments in the <code>factor()</code> function.
The <code>levels</code> argument are the <em>old</em> value for the sex
variable, and the <code>labels</code> argument are the new text values
that are meaningful. This way we are re-coding the values of the
variable, and the type of the variable at the same time.</p>
<p>Now, lets see how that looks for the education variable, this one is
a little more complicated for the larger number of categories.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>dat2<span class="sc">$</span>eud_fac <span class="ot">&lt;-</span> <span class="fu">factor</span>(dat2<span class="sc">$</span>Q275, </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">8</span>,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">names</span>(<span class="fu">attributes</span>(dat2<span class="sc">$</span>Q275)<span class="sc">$</span>labels)[<span class="dv">5</span><span class="sc">:</span><span class="dv">13</span>] )</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dat2<span class="sc">$</span>eud_fac)</span></code></pre></div>
<pre><code>## $levels
## [1] &quot;Early childhood education (ISCED 0) / no education&quot;
## [2] &quot;Primary education (ISCED 1)&quot;                       
## [3] &quot;Lower secondary education (ISCED 2)&quot;               
## [4] &quot;Upper secondary education (ISCED 3)&quot;               
## [5] &quot;Post-secondary non-tertiary education (ISCED 4)&quot;   
## [6] &quot;Short-cycle tertiary education (ISCED 5)&quot;          
## [7] &quot;Bachelor or equivalent (ISCED 6)&quot;                  
## [8] &quot;Master or equivalent (ISCED 7)&quot;                    
## [9] &quot;Doctoral or equivalent (ISCED 8)&quot;                  
## 
## $class
## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat2<span class="sc">$</span>eud_fac)</span></code></pre></div>
<pre><code>## 
## Early childhood education (ISCED 0) / no education 
##                                               4126 
##                        Primary education (ISCED 1) 
##                                               9932 
##                Lower secondary education (ISCED 2) 
##                                              10623 
##                Upper secondary education (ISCED 3) 
##                                              19843 
##    Post-secondary non-tertiary education (ISCED 4) 
##                                               7090 
##           Short-cycle tertiary education (ISCED 5) 
##                                               6151 
##                   Bachelor or equivalent (ISCED 6) 
##                                              13045 
##                     Master or equivalent (ISCED 7) 
##                                               4548 
##                   Doctoral or equivalent (ISCED 8) 
##                                                920</code></pre>
<p>With this we are changing the levels to <code>0:8</code> to specify
that we have values from 0 to 8. For the <code>labels</code>, I did not
wanted to write all the education categories, so I pulled these category
names from the <code>attributes()</code> function. This way we now have
a categorical variable, that R knows is categorical with meaningful
labels.</p>

</body>
</html>
